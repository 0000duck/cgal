%% Copyright (c) 2004  SciSoft.  All rights reserved.
%%
%% This file is part of CGAL (www.cgal.org); you may redistribute it under
%% the terms of the Q Public License version 1.0.
%% See the file LICENSE.QPL distributed with CGAL.
%%
%% Licensees holding a valid commercial license may use this file in
%% accordance with the commercial license agreement provided with the software.
%%
%% This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE
%% WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
%%
%% 
%%
%% Author(s)     : Fernando Cacciola <fernando_cacciola@hotmail.com>

\begin{ccRefConcept}{StraightSkeletonBuilderTraits_2}

%% \ccHtmlCrossLink{}     %% add further rules for cross referencing links
%% \ccHtmlIndexC[concept]{} %% add further index entries


\ccDefinition

The concept \ccRefName\ describes the requirements for the geometric traits class required by the algorithm class \ccc{Straight_skeleton_builder_2<Gt,Ss>}.

\ccTypes
  \ccNestedType{Kernel}{A model of the \ccc{Kernel} concept.}{}
  \ccGlue
  \ccNestedType{FT}{A \ccc{SqrtFieldNumberType} provided by the kernel. This type is used to represent the
   coordinates of the input points, of the skeleton nodes and the event time stored in the skeleton nodes.}{}
  \ccGlue
  \ccNestedType{Point_2}{The 2D point type provided by the kernel.}{}
  \ccGlue
  \ccNestedType{Segment_2}{A 2D oriented straight-line segment type provided by the kernel.}{}
  \ccGlue
  \ccTypedef{boost::tuple<Segment_2,FT,Segment_2,FT,Segment_2,FT> Trisegment_2;}{A record encapsulating 3 'oriented weighted offset segments', each of wich\\
corresponds to an input edge plus the weight given to the edge. Each offset segment represents the segment moved a certain offset time 't' and distance 'd*w'}

\ccTwo{StraightSkeletonBuilderTraits_2}{}  
  
\ccNestedType{Equal_2}
{A predicate object type being a model of the \ccc{Kernel::Equal_2} function object concept.}

\ccNestedType{Left_turn_2}
{A predicate object type being a model of the \ccc{Kernel::LeftTurn_2} function object concept.}

\ccNestedType{Collinear_2}
{A predicate object type being a model of the \ccc{Kernel::Collinear_2} function object concept.}

\ccNestedType{Construct_ss_trisegment_2}
{A construction object type.\\
Must provide \ccc{boost::shared_ptr<Trisegment_2> operator()( Segment_2 const& e0, FT const& w0, Segment_2 const& e1, FT const& w1, Segment_2 const& e2, FT const& w2)}, \\
which constructs and returns the trisegment encapsulating the 3 given segments along with their corresponding weights.}

\ccNestedType{Do_ss_event_exist_2}
{A predicate object type.\\
Must provide \ccc{bool operator()( boost::shared_ptr<Trisegment_2> const& tri, boost::optional<FT> maxtime) const}. 
This predicate determines if the 3 \textit{oriented weigthed offset lines} intersect at a single point such that the intersection \textit{time} \ccc{t} is $\geq 0$ and $< maxtime$.
The intersection time \ccc{t} is such that the Euclidean distance between each input segment and its offset line is $t*wi$, where $wi$ is the weight of the segment.\\
\ccPrecond{each segment must properly define an oriented line, that is, its endpoints cannot be coincident.}}

\ccNestedType{Is_edge_facing_ss_node_2}
{A predicate object type.\\
Must provide \ccc{bool operator()( Point_2 const& aContourNode, Segment_2 const& aEdge, FT const& aWeight) const}
and \ccc{bool operator()( Trisegment_2_ptr const& aSkeletonNode, Segment_2 const& aEdge, FT const& aWeight) const}.
This predicate determines if the contour node \ccc{aContourNode} or skeleton node \ccc{aSkeletonNode} is to the offset side of the given \ccc{aEdge}
The offset side of an edge is given by the sign of the \ccc{aWeight} assigned to it. If the weight is positive, the offset side is to the left, otherwise it to the right.
}

\ccNestedType{Oriented_side_of_event_point_wrt_bisector_2}
{A predicate object type.\\
Must provide \ccc{Oriented_side operator()( Trisegment_2_ptr const& aEvent
                                          , Segment_2        const& aE0
                                          , FT               const& aW0
                                          , Segment_2        const& aE1
                                          , FT               const& aW1
                                          , Trisegment_2_ptr const& aE01Event
                                          , bool                    aE0isPrimary 
                                          ) const}.
This predicate determines the oriented side of the event point wrt to the weighted bisector \ccc{[aE0,aW0,aE0,aW1]}.
The weighted bisector passes through the vertex \ccc{V}. If \ccc{[aE0,aE0]} are consecutive in the input, \ccc{V} is the target endpoint of aE0,
otherwise is the evnt point of \ccc{aE01Event}.
\ccc{aE0isPrimary} is used by the caller to identify the source and target bisector of the same edge, passed as aE0 first and aE1 later in a second call.
For consistency at the caller site, when \ccc{aE0isPrimary!=true} the result must be inverted.
}

\ccNestedType{Compare_ss_event_times_2}
{A predicate object type.\\
Must provide \ccc{Comparison_result operator()( boost::shared_ptr<Trisegment_2> x, boost::shared_ptr<Trisegment_2> y) const}, which compares the \ccc{times} for the events determined by the trisegments \ccc{x} and \ccc{y}.\\
\ccPrecond{\ccc{x} and \ccc{y} must be trisegments corresponding to events that actually exist (as determined by the predicate \ccc{Do_ss_event_exist_2}).}}

\ccNestedType{Are_ss_events_simultaneous_2}
{A predicate object type.\\
Must provide \ccc{bool operator()( boost::shared_ptr<Trisegment_2> x, boost::shared_ptr<Trisegment_2> y)}, which determines if the events given by \ccc{x} and \ccc{y} are coincident in time and space; that is, both trisegments intersect at the same point and at the same time.\\
\ccPrecond{\ccc{x} and \ccc{y} must be trisegments corresponding to events that actually exist (as determined by the predicate \ccc{Do_ss_event_exist_2}).}}

\ccNestedType{Construct_ss_event_time_and_point_2}
{A construction object type.\\
Must provide \ccc{boost::tuple<FT,Point_2> operator()( boost::shared_ptr<Trisegment_2> e)}, which given a trisegment, returns the time \ccc{t} and intersection point at which the corresponding 3 \textit{weighted offset lines at \ccc{t}} intersect.\\
The intersection time \ccc{t} is such that the Euclidean distance between each input segment and its offset line is $t*wi$, where $wi$ is the weight of the segment.\\
\ccPrecond{\ccc{e} must be an trisegment corresponding to an event that actually exist (as determined by the predicate \ccc{Do_ss_event_exist_2}).}}


\ccHasModels

\ccc{CGAL::Straight_skeleton_builder_traits_2<K>}.

\ccSeeAlso

\ccc{CGAL::Straight_skeleton_builder_2<Gt,Ss>}\\
\ccc{CGAL::Straight_skeleton_builder_traits_2<K>}\\

\end{ccRefConcept}

% +------------------------------------------------------------------------+
%%RefPage: end of main body, begin of footer
% EOF
% +------------------------------------------------------------------------+
