% +------------------------------------------------------------------------+
% | CGAL User Manual: 
% +------------------------------------------------------------------------+
% |
% | 10.07.2008   Peter Hachenberger
% | 
\RCSdef{\MinkowskiSum3Rev}{$Id$}
\RCSdefDate{\MinkowskiSum3Date}{$Date$}
% +------------------------------------------------------------------------+

\ccParDims

\ccUserChapter{Minkowski Sum of Polyhedra \label{chapterMinkowskiSum3}}
\ccChapterRelease{\MinkowskiSum3Rev. \ \MinkowskiSum3Date}
\ccChapterAuthor{Peter Hachenberger}

%\input{Minkowski_sum_3/PkgDescription.tex}

% +------------------------------------------------------------------------+
\section{Introduction}

\begin{figure}[h]
  \begin{ccTexOnly}
    \begin{center}
      \includegraphics[width=0.9\textwidth]{Minkowski_sum_3/fig/spoon_star}
    \end{center}
  \end{ccTexOnly}
  \begin{ccHtmlOnly}
    <p><center>
    <img src="./fig/spoon_star.gif" border=0 alt="Minkowski sum example">
    </center>
  \end{ccHtmlOnly}
  \caption{The Minkowski sum of a spoon and a star.}
\end{figure}

The Minkowski sum of two point sets $P$ and $Q$ in $\mathbb{R}^d$, denoted by
$P \oplus Q$, is defined as the set $\{p+q:p \in P, q \in Q
\}$. Minkowski sums are used in a wide range of applications such as
robot motion planning and computer-aided
design. Figure~\ref{fig:motionPlanning} shows an example how Minkowski
sums can be used to plan the motion of a translational robot. We want
to know which are legal positions of the robot, and where can the
robot go to from a specified starting position. If we model both, the
robot and the obstacles as a polyhedron and compute the Minkowski sum
of the inverted robot (robot reflected at the origin) and the obstacles,
then this Minkowski sum represents all illegal positions of the robot,
i.e., all positions where it intersects the obstacle. Of course, the
complement of that polyhedron are all legal positions of the robot,
i.e., all positions where it does not intersect an obstacle.

\begin{figure}
  \begin{ccTexOnly}
    \begin{center}
      \includegraphics[width=0.8\textwidth]{Minkowski_sum_3/fig/motion_planning}
    \end{center}
  \end{ccTexOnly}
  \begin{ccHtmlOnly}
    <p><center>
    <img src="./fig/motion_planning.gif" border=0 alt="motion planning">
    </center>
  \end{ccHtmlOnly}
  \caption{Can the robot enter the room? The Minkowski sum of the inverted
           robot and the obstacle represents all illegal positions of the 
           robot with respect to the obstacle. 
           The boundary of the Minkowski sum are legal positions. Thus, there
           is a path for the robot between the outer area and the room.}
  \label{fig:motionPlanning}
\end{figure}

This package provides a function \ccc{minkowski_sum_3} that computes
the Minkowski sum of two Nef polyhedra. We do not support arbitrary
Nef polyhedra, yet. The restrictions are discussed
Section~\ref{sec:restrictions}.

% +------------------------------------------------------------------------+
\section{Decomposition Method}

The decomposition method for computing the Minkowski sum of non-convex
polyhedra makes use of the fact that Minkowski sums of convex
polyhedra are rather easy to compute. It decomposes both polyhedra
into convex pieces, computes all pairwise Minkowski sums of the convex
pieces, and merges the pairwise sums.

\begin{figure}[t]
  \begin{ccTexOnly}
    \begin{center}
      \includegraphics[width=0.8\textwidth]{Minkowski_sum_3/fig/decomposition_method}
    \end{center}
  \end{ccTexOnly}
  \begin{ccHtmlOnly}
    <p><center>
    <img src="./fig/decomposition_method.gif" border=0 alt="decomposition method">
    </center>
  \end{ccHtmlOnly}
  \caption{The decomposition method decomposes both input polyhedra
           into convex parts, computes all pairwise Minkowski sums
           of the convex parts, and merges the pairwise sums.}
\end{figure}

The Minkowski sum is an inherent complex method. Using the
decomposition method, each polyhedron might be divided into a
quadratic number of pieces, which is worst-case optimal. Then up to
$n^2m^2$ pairwise sums have to be computed and merged, where $n$ and
$m$ is the complexity of the two input polyhedra. In total the
operation runs in $O(n^3m^3)$ time.

% +------------------------------------------------------------------------+
\section{Features and Restrictions}
\label{sec:restrictions}

This package was written to allow the computation of Minkowski sums of
full-dimensional polyhedra even in so-called tight-passage scenarios.
Tight passage scenarios occur in robot motion planning, when a robot
is just as wide as a passage it needs to traverse. The Minkowski sum
of the i.e., solve motion planing problems with passages that are
exactly as wide as the robot. In these scenarios at least one
polyhedron---the obstacles or the robot---must be modeled as an open
set. Then the Minkowski sum will also be an open set and tight
passages will occurr as lower-dimensional
exclusions. Figure~\ref{fig:motionPlanning} shows such a tight
passage scenario.

We strive for extending the package to work for arbitrary
polyhedra. In addition to the Minkowski sums of two solids, we added
several features, but are not complete. At the moment we allow an
input polyhedron to consist of:
\begin{enumerate}
\item singular vertices
\item singular edges
\item singular convex facets without holes
\item surface with convex facets that have no holes.
\item open or closed solids
\end{enumerate}

Taking a different viewpoint, the implementation is restricted as
follows:
\begin{enumerate}
\item The input polyhedra must be bounded.
\item All sets of coplanar facets that form a side of a full-dimensional
feature, must have the same selection mark.
\item All facets of lower-dimensional features need to be convex and 
must not have holes.
\end{enumerate}

% +------------------------------------------------------------------------+
\section{Usage}

The following example code illustrates the usage of the function
\ccc{minkowski_sum_3}. Note that the two input polyhedra will be
destroyed by the function. So, if they are needed further on, they
need to be copied, first. The copying is not done by the function
itself to keep the memory usage as small as possible.

\ccIncludeExampleCode{Minkowski_sum_3/cube_offset.cpp}

% +------------------------------------------------------------------------+
\section{Glide}

\begin{figure}
  \begin{ccTexOnly}
    \begin{center}
      \includegraphics[width=0.5\textwidth]{Minkowski_sum_3/fig/glide}
    \end{center}
  \end{ccTexOnly}
  \begin{ccHtmlOnly}
    <p><center>
    <img src="./fig/glide.gif" border=0 alt="glide operation">
    </center>
  \end{ccHtmlOnly}
  \caption{The region swept by a star that moves along a polygonal path.}
\end{figure}

With the function \ccc{minkowski_sum_3} it is also possible to realize
other interesting geometric operations like the glide operation, which
computes the point set swept by a polyhedron that moves along a
polygonal path. The following example shows how to construct a
polygonal path and then compute the glide operation by calling the
function \ccc{minkowski_sum_3}.

\ccIncludeExampleCode{Minkowski_sum_3/glide.cpp}
