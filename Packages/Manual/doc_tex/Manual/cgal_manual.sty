% +------------------------------------------------------------------------+
% | cgal_manual.sty
% | Common style files and definitions for CGAL User and Reference Manuals
% +------------------------------------------------------------------------+

% Style files used throughout the manuals

% used with LaTeX and also understood by the LaTeX to HTML Converter
\usepackage{cc_manual}
\usepackage{cc_manual_index}
\usepackage{latex_to_html}
\usepackage{path}
\usepackage{alltt}
\usepackage{cprog} % outdated
\usepackage{ifthen}

% used with LaTeX but _not_ understood by the converter
\lcTex{
  \usepackage{makeidx}
  \usepackage{amssymb}
  \usepackage{graphicx}
  \usepackage{epsfig}
  \usepackage{ipe}
  \usepackage{pslatex}
  \usepackage{psfrag}
  \usepackage{rotating}
  \usepackage{longtable}
}

% +------------------------------------------------------------------------+
% Configuration section begin ...
% +------------------------------------------------------------------------+

% CGAL release and date, adapt this to the current release
%\newcommand{\cgalrelease}{3.1-I}
% \newcommand{\cgalreleasedate}{November 2003} % use this for public releases
%\newcommand{\cgalreleasedate}{\today} % use this for internal releases

% Read version.tex for release number
\lcTex{\catcode`@=11}
\lcTex{\@input{version.tex}%
  \ifx\cgalversion\@ClearUndefdMacro \gdef\cgalversion{Separate Build}\else
    \xdef\cgalversion{Release \cgalversion}\fi
  \ifx\cgalversiondate\@ClearUndefdMacro \gdef\cgalversiondate{\today}\fi}
\lcTex{\catcode`@=12}

\lcHtml{\lciIfFileExists{version.tex}{\input{version.tex}}{}%
  \lciIfDefined{\cgalversion}%
    {\xdef\cgalTmpVersion{\cgalversion}%
      \gdef\cgalversion{Release \cgalTmpVersion}}%
    {\gdef\cgalversion{Separate Build}}%
  \lciIfDefined{\cgalversiondate}{}{\gdef\cgalversiondate{\today}}}


% set this to true for generating the pdf version of the manual (using
% ps2pdf from ghostscript).  If this is true when creating postscript,
% the table of contents (and several other things) will be blue.
\newboolean{usehyperref}
\setboolean{usehyperref}{false}

% minitoc and hyperref do not seem to work together so they should not both
% be true
\newboolean{useminitoc}
\setboolean{useminitoc}{true}

% We rather like a less dense table of contents (maybe HTML only)
\setcounter{secnumdepth}{2} % number subsections inclusively
\setcounter{tocdepth}{1}    % toc with sections inclusively


% +------------------------------------------------------------------------+
% ... end configuration section.
% +------------------------------------------------------------------------+

% include hypperref for PDF documents if selected above
\ifthenelse{\boolean{usehyperref}}{
  \lcTex{
  \usepackage[ps2pdf=true,
              colorlinks=true,
              linkcolor=blue,
              bookmarksnumbered=true,
              pdftitle={CGAL Library Manuals},
              pdfkeywords={computational geometry, generic programming,
                           algorithms, software library, C++},
              pdfborder={0 0 0}]{hyperref}%
  }
}{}

% include minitoc if selected above
\ifthenelse{\boolean{useminitoc}}{\lcTex{\usepackage{minitoc}}}
{\newcommand{\minitoc}{}}

% page dimensions
% ---------------
\lcTex{
  \textwidth 15.6cm 
  \textheight 23 cm
  \ifthenelse{\boolean{usehyperref}}{}{\topmargin -14mm}
  \evensidemargin 3mm 
  \oddsidemargin 3mm
  \marginparsep10mm   % needed for the tab-markers of reference pages
  \marginparwidth15mm
}

% Optionally, package authors and a package release can be shown
% right below the chapter title. Comment out the following lines
% to get back to the default behavior.
% -----------------------------------------------------------------
\def\ccTagChapterAuthor{\ccTrue}
% \def\ccTagChapterRelease{\ccTrue}

% default column layout
% ---------------------
\newcommand{\cgalcolumnlayout}{%
    \ccSetThreeColumns{CGAL_Oriented_side}{}{\hspace*{8.5cm}}%
    \ccPropagateThreeToTwoColumns}
% backwards compatible!
\newcommand{\cgalColumnLayout}{\cgalcolumnlayout}


% reinitialize some settings before each chapter
% ----------------------------------------------
\newcommand{\cgalreinit}{\cgalcolumnlayout}

% The tab marker are aligned with the top of the main text. To align
% them with the page header, the following length definition can be used.
% -----------------------------------------------------------------------
%\setlength{\ccRefTabLift}{12.5mm}

% Be careful to check that other redefinitions of ccRefPageBegin and 
% ccRefPageEnd don't cause strange problems
% (e.g. if ccAdvanced is used to bracket a ref page)
% -------------------------------------------------------------------------
\def\ccRefPageBegin{\ccParDims\cgalcolumnlayout}
\def\ccRefPageEnd{\ccParDims\cgalcolumnlayout}


% All identifiers reside in CGAL scope by default
% -----------------------------------------------
\ccDefGlobalScope{CGAL::}

% LaTeX settings
% --------------
% \makeindex  --> placed in wrapper

% make LaTeX process the whole manual without stopping for errors
% \batchmode  --> placed in wrapper

% relax formatting strictness to avoid many overfull \hbox's etc.
\sloppy

% Provide a default title page macro. Args: <package/module name>
% ---------------------------------------------------------------
\newcommand{\cgaltitlepage}[1]{%
  \pagestyle{empty}
  \begin{titlepage}\mbox{}\vspace{3cm}
  \lcTex{\centerline{%
      \includegraphics[scale=0.25]{Manual/fig/c-simp}~
      \includegraphics[scale=0.25]{Manual/fig/g-simp}~
      \includegraphics[scale=0.25]{Manual/fig/a-simp}~
      \includegraphics[scale=0.25]{Manual/fig/l-simp}}}
  \lcRawHtml{
  <p align=center>
    <img border="0" src="Manual/fig/cgal_small_FAF8E8.gif" align="center"
      alt="[Computational Geometry Algorithms Library]">
  </p>}
  \vspace{2cm}

  \centerline{{\huge #1}}\vspace{2cm}

  \centerline{{\Large \cgalversion}}\vspace{1cm}

  \centerline{{\Large \cgalversiondate}}
  \end{titlepage}  
}

% Implement the two columns layout for the HTML converted part
% ------------------------------------------------------------

\lcTex{
  % Args: <package-name>
  % Remembers the package name, such that it can be tested later with
  % \cgalifpackage{<package-name>}{<yes-text>}{<no-text>}
  \newcommand{\cgaldeclarepackage}[1]{%
    \expandafter\xdef\csname CgalPackage#1\endcsname{Dummy}}

  % Args: <package-name>, <yes-text>, <no-text>
  % Tests, if <package-name> was previously declared with 
  % \cgaldeclarepackage{<package-name>}, and if so expands the <yes-text>,
  % and otherwise expands the <no-text>
  \newcommand{\cgalifpackage}[3]{%
    \expandafter\ifx\csname CgalPackage#1\endcsname\relax #3\else #2\fi}
}

\lcHtml{
  % Args: <package-name>
  % Remembers the package name, such that it can be tested later with
  % \cgalifpackage{<package-name>}{<yes-text>}{<no-text>}
  \newcommand{\cgaldeclarepackage}[1]{\gdef{\CgalPackage#G1}{Dummy}}

  % Args: <package-name>, <yes-text>, <no-text>
  % Tests, if <package-name> was previously declared with 
  % \cgaldeclarepackage{<package-name>}, and if so expands the <yes-text>,
  % and otherwise expands the <no-text>
  \newcommand{\cgalifpackage}[3]{\lciIfDefined{\CgalPackage#G1}{#2}{#3}}
}

\lcHtml{\lcTwoColumnToc}%

% Group all \entryleft, \entryright, \entryleftright, \package... commands 
% as argument to this macro.
\newcommand{\cgalchapters}[1]{%
  % make a first run over the argument 
  % and declare \ifthen variables for packages
  \newcommand{\entryleft}[1]{}%
  \newcommand{\entryright}[1]{}%
  \newcommand{\entryleftright}[2]{}%
  \newcommand{\packageleft}[1]{\cgaldeclarepackage{##1}}%
  \newcommand{\packageright}[1]{\cgaldeclarepackage{##1}}%
  \newcommand{\packageleftright}[2]{%
    \cgaldeclarepackage{##1}\cgaldeclarepackage{##2}}%
  #1
  \lcTex{%
    \renewcommand{\entryleft}[1]{##1}%
    \renewcommand{\entryright}[1]{}%
    \renewcommand{\entryleftright}[2]{##1}%
    \renewcommand{\packageleft}[1]{\cgalreinit\include{##1/main}}%
    \renewcommand{\packageright}[1]{}%
    \renewcommand{\packageleftright}[2]{\cgalreinit\include{##1/main}}%
    #1
    \renewcommand{\entryleft}[1]{}%
    \renewcommand{\entryright}[1]{##1}%
    \renewcommand{\entryleftright}[2]{##2}%
    \renewcommand{\packageleft}[1]{}%
    \renewcommand{\packageright}[1]{\cgalreinit\include{##1/main}}%
    \renewcommand{\packageleftright}[2]{\cgalreinit\include{##2/main}}%
    #1
  }%
  \lcHtml{\lciIfTwoColumnToc{
      \newcommand{\entryleft}[1]{\lcTocLeft ##1}%
      \newcommand{\entryright}[1]{\lcTocRight ##1}%
      \newcommand{\entryleftright}[2]{%
        \lcTocSync\lcTocLeft ##1\lcTocRight ##2\lcTocSync}%
      \newcommand{\packageleft}[1]{\lcTocLeft \cgalreinit\include{##1/main}}%
      % improve that later
      \newcommand{\packageright}[1]{\lcTocRight \cgalreinit\include{##1/main}}%
      \newcommand{\packageleftright}[2]{%
        \lcTocSync\lcTocLeft\cgalreinit\include{##1/main}%
        \lcTocRight\cgalreinit\include{##2/main}\lcTocSync}%
      #1
    }{%
      \newcommand{\entryleft}[1]{##1}%
      \newcommand{\entryright}[1]{}%
      \newcommand{\entryleftright}[2]{##1}%
      \newcommand{\packageleft}[1]{\cgalreinit\include{##1/main}}%
      \newcommand{\packageright}[1]{}%
      \newcommand{\packageleftright}[2]{\cgalreinit\include{##1/main}}%
      #1
      \renewcommand{\entryleft}[1]{}%
      \renewcommand{\entryright}[1]{##1}%
      \renewcommand{\entryleftright}[2]{##2}%
      \renewcommand{\packageleft}[1]{}%
      \renewcommand{\packageright}[1]{\cgalreinit\include{##1/main}}%
      \renewcommand{\packageleftright}[2]{\cgalreinit\include{##2/main}}%
      #1
    }%
  }%
}

% +------------------------------------------------------------------------+
% | end of cgal_manual.sty
% +------------------------------------------------------------------------+
