#!/sw/bin/perl5
my ($version, $date, $maintainer, $email);

 sub get_version($)
{
   open VERSION, $_[0] or return ;
    while (<VERSION>) {
	next if (/^\s*$/);
	if ( /^\s*(\d+(?:[\.]\d+)*)\s*\((.*)\)\s*$/ ) {
	    $version = $1;
	    $date = $2;
	    last;
	} else {
	    close VERSION;
	    return ;
	}
    }
    while (<VERSION>) {
	next if (/^\s*$/);
	if ( /^\s*[Mm]aintainer\s*:\s*([^<]+?)\s*<(.*)>\s*$/ ) {
	    $maintainer=$1;
	    $email = $2;
        } elsif ( /^\s*[Mm]aintainer\s*:\s*(.+?)\s*$/ ) {
	    $maintainer=$1;
	}
    }
    close VERSION;
}

if ($#ARGV != 0) {
 exit 1;
}
get_version($ARGV[0]);
print STDOUT $version, " (", $date, ")\n";
if (defined($maintainer)) {
    if (defined($email)) {
        print STDOUT "<br> <a href=\"mailto:$email\">", $maintainer,"</a>\n";
    } else {
        print STDOUT "<br><em>", $maintainer,"</em>\n";
    }
}
 
