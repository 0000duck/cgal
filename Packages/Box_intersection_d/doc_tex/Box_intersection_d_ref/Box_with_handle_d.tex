% +------------------------------------------------------------------------+
% | Reference manual page: Box_with_handle_d.tex
% +------------------------------------------------------------------------+


\begin{ccRefClass}[Box_intersection_d::]{Box_with_handle_d<NT, int D, Handle, IdPolicy>}
\ccDefinition

\ccRefName\ is a generic iso-oriented bounding box in dimension $D$
that stores additionally a handle to some underlying geometric object.
It provides in each dimension an interval with lower and upper
endpoints represented with the number type \ccc{NT}.  This class is
designed to work smoothly with the algorithms for intersecting
sequences of iso-oriented boxes.  For degeneracy handling, the boxes
need to provide a unique \ccc{id}-number. The policy parameter
\ccc{IdPolicy} offers several choices. The template parameters have to
comply with the following requirements:

\begin{itemize}
  \item
    \ccc{NT}: number type for the box boundaries, needs to be a model
    of the \ccc{Assignable} and the \ccc{LessThanComparable} concept.
  \item
    \ccc{int D}: the dimension of the box.
  \item
    \ccc{Handle} concept, e.g., a pointer, an iterator, or a circulator.
  \item
    \ccc{IdPolicy}: specifies how the \ccc{id}-number will be
    provided. Can be one of the following types, where
    \ccc{ID_EXPLICIT} is the default for this parameter:
    \begin{itemize}
      \item
        \ccc{ID_NONE}: no \ccc{id}-number is provided. Can be useful
        to have this class as a base class for different
        implementations of \ccc{id}-numbers than the ones provided
        here.
      \item
        \ccc{ID_EXPLICIT}: the \ccc{id}-number is stored explicitly in
        the box and automatically created and assigned at construction
        time of the box. Note that copying a box (copy-constructor and
        assignment) does not create a new \ccc{id}-number but keeps
        the old one, which is the behavior needed by the
        \ccc{CGAL::box_self_intersection} algorithm. This is therefore
        the safe default implementation. 
      \item
        \ccc{ID_FROM_BOX_ADDRESS}: casts the address of the box into a
        \ccc{std::ptrdiff_t} to create the \ccc{id}-number. Works fine 
        if the \ccHtmlNoLinksFrom{intersection} algorithms work effectively with pointers
        to boxes, but not in the case where the algorithms work with
        box values, because the algorithms modify the order of the
        boxes, and the \ccc{CGAL::box_self_intersection} algorithm
        creates copies of the boxes that would not have identical
        \ccc{id}-numbers.  
      \item
        \ccc{ID_FROM_HANDLE}: casts the address of the value of the
        handle into a \ccc{std::ptrdiff_t} to create the
        \ccc{id}-number. Works in many conceivable settings, e.g.,
        it works with boxes copied by value or by pointer, and
        the self \ccHtmlNoLinksFrom{intersection} test. It will not work if there
        is no one-to-one mapping between boxes and the geometry that
        is referred to with the handles, i.e., this \ccc{id}-number
        scheme fails if a geometric object creates several boxes with
        the same handle value. Note that this option is not
        available for the \ccc{CGAL::Box_intersection_d::Box_d} type
        that does not store a handle.
    \end{itemize}
\end{itemize}

\ccInclude{CGAL/Box_intersection_d/Box_with_handle_d.h}\\
and also automatically with\\
\ccInclude{CGAL/box_intersection_d.h}

\ccIsModel

\ccRefConceptPage{BoxIntersectionBox_d}

\ccTypes
\ccThree{std::size_tMMMMM}{Mbox.min_coord( int dim)}{}\ccThreeToTwo

\ccNestedType{NT}{number type to represent the box
  boundaries. Allowed are the builtin types \ccc{int}, \ccc{unsigned
  int}, \ccc{float}, and \ccc{double}.}

%\footnote{The support is limited
%  since we need the largest and the smallest number representable for
%  this number type, which are currently only provided for the types
%  \ccc{int}, \ccc{unsigned int}, \ccc{float}, and \ccc{double} with the
%  class \ccc{CGAL::Box_intersection_d::box_limits<NT>}.}

\ccTypedef{typedef std::size_t ID;}{type for the box \ccc{id}-number.}


\ccCreation
\ccCreationVariable{box}
\ccThree{std::size_t}{MMMMMMbox.min_coord( int dim)}{}\ccThreeToTwo

\ccConstructor{Box_with_handle_d();}{Default constructor. No
  particular initialization.}

\ccConstructor{Box_with_handle_d(bool complete, Handle h);}{initializes to the
  complete or the empty space. If empty, all interval starting(end)
  points will be set to positive(negative) infinity, sets handle to $h$.} 

\ccConstructor{Box_with_handle_d(NT lo[D], NT hi[D], Handle h);}{initializes 
  the box intervals to [\ccc{lo[i]},\ccc{hi[i]}], $0 \leq i < D$ and
  sets the handle to $h$. 
  \ccPrecond \ccc{lo[i]} $<$ \ccc{hi[i]} for $0 \leq i < D$.}

\ccConstructor{Box_with_handle_d( const Bbox_2& bbox, Handle h);}{constructs
 from bbox and sets the handle to $h$, exists iff $D=2$ and \ccc{NT}$
 \equiv $\ccc{double}.} 
\ccGlue
\ccConstructor{Box_with_handle_d( const Bbox_3& bbox, Handle h);}{constructs
 from bbox and sets the handle to $h$, exists iff $D=3$ and \ccc{NT}$
 \equiv $\ccc{double}.}  


\ccModifiers

\ccMethod{void init( bool complete = false);}{initializes to the complete or 
  the empty space. If empty, all interval starting(end) points will be
  set to positive(negative) infinity.}

\ccMethod{void extend(NT point[D]);}{extend \ccc{box} to contain the
  old \ccc{box} and \ccc{point}.}

\ccAccessFunctions

\ccMethod{Handle handle() const;}{returns the handle stored in \ccc{box}.}

\ccFunction{int Box_with_handle_d::dimension();}{%
  returns $D$, the dimension of the box.}

\ccMethod{std::size_t id();} {returns a unique box id, see the
  \ccc{IdPolicy} template parameter above for the different
  choices. Does not exist if \ccc{ID_NONE} has been chosen for the
  \ccc{IdPolicy}.}

\ccMethod{NT min_coord( int d) const;}{%
  returns the lower boundary in dimension \ccc{d}, $0 \leq $\ccc{d}$ < D$.}

\ccMethod{NT max_coord( int d) const;}{%
  returns the upper boundary in dimension \ccc{d}, $0 \leq $\ccc{d}$ < D$.}

\ccMethod{const Bbox_2& bbox() const;}{returns the bounding box iff
  $D=2$ and \ccc{NT}$ \equiv $\ccc{double}.}
\ccGlue
\ccMethod{const Bbox_3& bbox() const;}{returns the bounding box iff
  $D=3$ and \ccc{NT}$ \equiv $\ccc{double}.}

\ccSeeAlso

\ccRefIdfierPage{CGAL::box_intersection_d}\\
\ccRefIdfierPage{CGAL::box_self_intersection_d}\\
\ccRefIdfierPage{CGAL::box_intersection_all_pairs_d}\\
\ccRefIdfierPage{CGAL::box_self_intersection_all_pairs_d}

\ccRefIdfierPage{CGAL::Box_intersection_d::Box_traits_d<BoxHandle>}\\
\ccRefConceptPage{BoxIntersectionTraits_d}



\end{ccRefClass}
