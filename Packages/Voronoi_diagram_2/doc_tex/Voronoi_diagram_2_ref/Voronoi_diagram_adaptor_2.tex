%% Copyright (c) 2005  Foundation for Research and Technology-Hellas (Greece).
%% All rights reserved.
%%
%% This file is part of CGAL (www.cgal.org); you may redistribute it under
%% the terms of the Q Public License version 1.0.
%% See the file LICENSE.QPL distributed with CGAL.
%%
%% Licensees holding a valid commercial license may use this file in
%% accordance with the commercial license agreement provided with the software.
%%
%% This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE
%% WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
%%
%% $Source$
%% $Revision$ $Date$
%% $Name$
%%
%% Author(s)     : Menelaos Karavelas <mkaravel@tem.uoc.gr>


\begin{ccRefClass}{Voronoi_diagram_2<DG,VT>}

%% add template arg's if necessary

%% \ccHtmlCrossLink{}     %% add further rules for cross referencing links
%% \ccHtmlIndexC[class]{} %% add further index entries
\ccCreationVariable{traits}
\ccDefinition

The class \ccRefName\ provides an adaptor that enables us
to view a triangulated Delaunay graph as their dual subdivision, the
Voronoi diagram. The class \ccRefName\ is designed to provide an API
that is similar to that of \cgal's arrangements.\\
The template parameter of the \ccRefName\ class corresponds to the
triangulated Delaunay graph and must be a model of the
\ccc{DelaunayGraph_2} concept. The second template parameter must be a
model of the \ccc{VoronoiTraits_2} concept.

\ccInclude{CGAL/Voronoi_diagram_2.h}

\ccRefines
\ccc{DefaultConstructible}, \ccc{CopyConstructible}, \ccc{Assignable}

\ccTypes
%
\ccThree{typedef Delaunay_graph::size_type}{Delaunay_graph+}{}
\ccThreeToTwo
\ccTwo{Voronoi_diagram_2<DG,VT>::Locate_result+}{}
%
\ccTypedef{typedef DG Delaunay_graph;}{A type for the dual Delaunay graph.}
\ccGlue
\ccTypedef{typedef VT Voronoi_traits;}{A type for the traits needed by
  the Voronoi diagram adaptor.}
\ccGlue
\ccTypedef{typedef Voronoi_traits::Point_2 Point_2;}{A type a point.}
\ccGlue
\ccTypedef{typedef Voronoi_traits::Site_2 Site_2;}{A type
  for the sites of the Voronoi diagram.}
\ccGlue
\ccTypedef{typedef Delaunay_graph::size_type size_type;}{A type for sizes.}
%\ccGlue
\ccNestedType{Locate_result}{The result type of the point location
  queries. In must be a model of the \ccc{VoronoiDiagramLocateResult_2}
  concept.}
\ccGlue
\ccNestedType{Halfedge}{A type for the halfedges of the Voronoi diagram.
  It is a model of the \ccc{VoronoiDiagramHalfedge_2} concept.}
\ccGlue
\ccNestedType{Vertex}{A type for the vertices of the Voronoi diagram.
  It is a model of the \ccc{VoronoiDiagramVertex_2} concept.}
\ccGlue
\ccNestedType{Face}{A type for the faces of the Voronoi diagram.
  It is a model of the \ccc{VoronoiDiagramFace_2} concept.}

The vertices, edges and faces of the Voronoi diagram are accessed
through \ccc{handles}, \ccc{iterators} and \ccc{circulators}. 
The iterators and circulators are all bidirectional and non-mutable.
The circulators and iterators are assignable to the 
corresponding handle types, and they are also convertible to the
corresponding handles.

\ccTwo{Voronoi_diagram_2<DG,VT>::Unbounded_halfedges_iterator+}{}
%
\ccNestedType{Halfedge_handle}{Handle for halfedges.}
\ccGlue
\ccNestedType{Vertex_handle}{Handle for vertices.}
\ccGlue
\ccNestedType{Face_handle}{Handle for faces.}
\ccGlue
\ccNestedType{Edge_iterator}{A type for an iterator over Voronoi
  edges. Edges are considered non-oriented. Its value type is
  \ccc{Halfedge}.}
\ccGlue
\ccNestedType{Halfedge_iterator}{A type for an iterator over Voronoi
  halfedges. Halfedges are oriented and come in pairs. Its value type
  is \ccc{Halfedge}.}
\ccGlue
\ccNestedType{Face_iterator}{A type for an iterator over Voronoi
  faces. Its value type is \ccc{Face}.}
\ccGlue
\ccNestedType{Vertex_iterator}{A type for an iterator over Voronoi
  vertices. Its value type is \ccc{Vertex}.}
\ccGlue
\ccNestedType{Halfedge_around_vertex_circulator}{A type for a
  circulator over the halfedges that have a common vertex as their
  target. Its value type is \ccc{Halfedge}.}
\ccGlue
\ccNestedType{Ccb_halfedge_circulator}{A type for a circulator over
  the halfedges on the boundary of a Voronoi face. Its value type of
  is \ccc{Halfedge}.}
\ccGlue
\ccNestedType{Unbounded_faces_iterator}{A type for an iterator over
  the unbounded faces of the Voronoi diagram. Its value type is
  \ccc{Face}.}
\ccGlue
\ccNestedType{Bounded_faces_iterator}{A type for an iterator over
  the bounded faces of the Voronoi diagram. Its value type is
  \ccc{Face}.}
\ccGlue
\ccNestedType{Unbounded_halfedges_iterator}{A type for an iterator over
  the unbounded halfedges of the Voronoi diagram. Its value type is
  \ccc{Halfedge}.}
\ccGlue
\ccNestedType{Bounded_halfedges_iterator}{A type for an iterator over
  the bounded halfedges of the Voronoi diagram. Its value type is
  \ccc{Halfedge}.}
\ccGlue
\ccNestedType{Site_iterator}{A type for an iterator over the
  sites of the Voronoi diagram. Its value type is \ccc{Site_2}.}

\ccCreationVariable{vd}

\ccCreation
\ccThree{Voronoi_diagram_2<DG,VT>}{vd}{}
\ccThreeToTwo
%
\ccConstructor{Voronoi_diagram_2(Voronoi_traits
  tr = Voronoi_traits());}{Creates a Voronoi diagram using \ccc{tr} as
  Voronoi traits.}
%
\ccConstructor{Voronoi_diagram_2(Delaunay_graph dg, Voronoi_traits
  tr = Voronoi_traits());}{Creates a Voronoi diagram from the
  Delaunay graph \ccc{dg} and using \ccc{tr} as Voronoi traits. The
  Delaunay graph \ccc{dg} is fully copied.}
%
\ccConstructor{template<class Iterator>
  Voronoi_diagram_2(Iterator first, Iterator beyond, Voronoi_traits
  tr = Voronoi_traits());}{Creates a Voronoi diagram using as
  sites the sites in the iterator range \ccStyle{[first, beyond)}
  and using \ccc{tr} as Voronoi traits. The value type of
  \ccc{Iterator} must be \ccc{Site_2}.}


\ccHeading{Access Methods}
%
\ccThree{Halfedge_handle}{vd.number_of_halfedges()+}{}
%
\ccMethod{Delaunay_graph dual();}
{Returns a reference to the dual graph, i.e., the Delaunay graph.}
\ccGlue
\ccMethod{Halfedge_handle dual(Halfedge::Delaunay_edge e);}
{Returns a handle to the halfedge in the Voronoi diagram that is dual
  to the edge \ccc{e} in the Delaunay graph.}
\ccGlue
\ccMethod{Face_handle dual(Face::Delaunay_vertex_handle v);}
{Returns a handle to the face in the Voronoi diagram that is dual to
  the vertex corresponding to the vertex handle \ccc{v} in the
  Delaunay graph.}
\ccGlue
\ccMethod{Vertex_handle dual(Vertex::Delaunay_face_handle f);}
{Returns a handle to the vertex in the Voronoi diagram that is dual to
  the face corresponding to the face handle \ccc{f} in the Delaunay graph.}
\ccGlue
\ccMethod{Voronoi_traits voronoi_traits();}
{Returns a reference to the Voronoi traits.}
\ccGlue
\ccMethod{size_type number_of_vertices();}
{Returns the number of Voronoi vertices.}
\ccGlue
\ccMethod{size_type number_of_faces();}
{Returns the number of Voronoi faces (bounded and unbounded).}
\ccGlue
\ccMethod{size_type number_of_halfedges();}
{Returns the number of halfedges (bounded and unbounded) in the
  Voronoi diagram. This is always an even number.}
\ccGlue
\ccMethod{size_type number_of_connected_components();}
{Returns the number of connected components of the Voronoi skeleton.}
\ccGlue
\ccMethod{Face_handle unbounded_face();}{Returns one of the unbounded
  faces of the Voronoi diagram. If no unbounded faces exist the
  default constructed face handle is returned.}
\ccGlue
\ccMethod{Face_handle bounded_face();}{Returns one of the bounded
  faces of the Voronoi diagram. If no bounded faces exist the default
  constructed face handle is returned.}
\ccGlue
\ccMethod{Halfedge_handle unbounded_halfedge();}{Returns one of the unbounded
  halfedges of the Voronoi diagram. If no unbounded halfedges exist the
  default constructed halfedge handle is returned.}
\ccGlue
\ccMethod{Halfedge_handle bounded_halfedge();}{Returns one of the bounded
  halfedges of the Voronoi diagram. If no bounded halfedges exist the
  default constructed halfedge handle is returned.}
%
%% \ccThree{Edge_degeneracy_tester}{vd.edge_tester()+}{}
%% \ccMethod{Edge_degeneracy_tester edge_tester();}{Returns a reference
%%   to the edge degeneracy tester.}
%% \ccGlue
%% \ccMethod{Face_degeneracy_tester face_tester();}{Returns a reference
%%   to the face degeneracy tester.}



\ccHeading{Traversal of the Voronoi diagram}


A Voronoi diagram can be seen as a container of faces, vertices and
halfedges. Therefore the Voronoi diagram provides several iterators
and circulators that allow to traverse it.



\ccHeading{Iterators}

\ccThree{Unbounded_halfedges_iterator}{vd.unbounded_halfedges_begin()+}{}

The following iterators allow respectively to visit the faces (all or
only the unbounded ones), edges, halfedges and vertices of the Voronoi
diagram. These iterators are non-mutable, bidirectional and their
value types are respectively \ccc{Face}, \ccc{Halfedge},
\ccc{Halfedge} and \ccc{Vertex}. The iterators are invalidated by any
change in the Voronoi diagram.

\ccMethod{Face_iterator faces_begin();}{Starts at an arbitrary Voronoi face.}
\ccGlue
\ccMethod{Face_iterator faces_end();}{Past-the-end iterator.}

\ccMethod{Unbounded_faces_iterator unbounded_faces_begin();}
{Starts at an arbitrary unbounded Voronoi face.}
\ccGlue
\ccMethod{Unbounded_faces_iterator unbounded_faces_end();}
{Past-the-end iterator.}

\ccMethod{Bounded_faces_iterator bounded_faces_begin();}
{Starts at an arbitrary bounded Voronoi face.}
\ccGlue
\ccMethod{Bounded_faces_iterator bounded_faces_end();}
{Past-the-end iterator.}

\ccMethod{Edge_iterator edges_begin();}{Starts at an arbitrary Voronoi edge.}
\ccGlue
\ccMethod{Edge_iterator edges_end();}{Past-the-end iterator.}

\ccMethod{Halfedge_iterator halfedges_begin();}
{Starts at an arbitrary Voronoi halfedge.}
\ccGlue
\ccMethod{Halfedge_iterator halfedges_end();}{Past-the-end iterator.}

\ccMethod{Unbounded_halfedges_iterator unbounded_halfedges_begin();}
{Starts at an arbitrary unbounded Voronoi edge.}
\ccGlue
\ccMethod{Unbounded_halfedges_iterator unbounded_halfedges_end();}
{Past-the-end iterator.}

\ccMethod{Bounded_halfedges_iterator bounded_halfedges_begin();}
{Starts at an arbitrary bounded Voronoi edge.}
\ccGlue
\ccMethod{Bounded_halfedges_iterator bounded_halfedges_end();}
{Past-the-end iterator.}

\ccMethod{Vertex_iterator vertices_begin();}
{Starts at an arbitrary Voronoi vertex.}
\ccGlue
\ccMethod{Vertex_iterator vertices_end();}{Past-the-end iterator.}

The following iterator provides access to the sites that define
the Voronoi diagram. Its value type is \ccc{Site_2}. It is
invalidated by any change in the Voronoi diagram.

\ccMethod{Site_iterator sites_begin();}
{Starts at an arbitrary site.}
\ccGlue
\ccMethod{Site_iterator sites_end();}{Past-the-end iterator.}


\ccHeading{Circulators}

The Voronoi diagram adaptor also provides circulators that allow to visit 
all halfedges incident to a given vertex and all halfedges on the
boundary of a Voronoi face. These circulators are non-mutable and
bidirectional.
The operator \ccc{operator++} moves the former circulator counterclockwise
around the vertex while the \ccc{operator--} moves clockwise.
The latter circulator is moved by the operator \ccc{operator++} to the
next halfedge on the boundary in the counterclockwise sense, while
\ccc{operator--} moves clockwise.
The \ccc{Halfedge_around_vertex_circulator} circulator is
invalidated by any modification in the faces adjacent to the vertex
over which it is defined. The \ccc{Ccb_halfedge_circulator} is
invalidated by any modification in the face over which it is defined.

\ccThree{Ccb_halfedge_circulator}{vd.ccb_halfedges(Face_handle f)+}{}
\ccThreeToTwo
%
\ccMethod{Ccb_halfedge_circulator ccb_halfedges(Face_handle f);}
{Starts at an arbitrary halfedge on the boundary of the Voronoi face
  \ccc{*f}.}
\ccGlue
\ccMethod{Ccb_halfedge_circulator ccb_halfedges(Face_handle f,
  Halfedge_handle h);} 
{Returns a circulator over the halfedges on the boundary of
  \ccc{*f}. The circulator is initialized with the halfedge \ccc{*h}.
  \ccPrecond{The halfedge \ccc{*h} must lie on the boundary of \ccc{*f}.}}

\ccThree{Halfedge_around_vertex_circulator}{vd.incident_halfedges+}{}
\ccThreeToTwo
%
\ccMethod{Halfedge_around_vertex_circulator
  incident_halfedges(Vertex_handle v);}
{Starts at an arbitrary halfedge incident to Voronoi vertex \ccc{*v}.}
\ccGlue
\ccMethod{Halfedge_around_vertex_circulator
  incident_halfedges(Vertex_handle v, Halfedge_handle h);}
{Returns a circulator over the halfedges incident to the Voronoi
  vertex \ccc{*v}. The circulator is initialized with the halfedge
  \ccc{*h}.
  \ccPrecond{The halfedge \ccc{*h} must be incident to \ccc{*v}.}}


%\begin{ccTexOnly}
%\newpage
%\end{ccTexOnly}


\ccHeading{Insertion}
\ccThree{Face_handle}{vd.insert(Site_2 t)+}{}
\ccMethod{Face_handle insert(Site_2 t);}{Inserts the site
  \ccc{t} in the Voronoi diagram. A handle to the face corresponding
  to the Voronoi face of \ccc{t} in the Voronoi diagram is
  returned. If \ccc{t} has an empty Voronoi cell, the default
  constructed face handle is returned. This method is supported only
  if \ccStyle{Voronoi_traits::Has_insert} is set to \ccStyle{CGAL::Tag_true}.}
\ccGlue
\ccMethod{template<class Iterator>
  size_type insert(Iterator first, Iterator beyond);}{Inserts, in the
  Voronoi diagram, the sites in the iterator range \ccc{[first,
    beyond)}. The value type of \ccc{Iterator} must be
  \ccc{Site_2}. The number of sites in the iterator range is
  returned. This method is supported only if
  \ccStyle{Voronoi_traits::Has_insert} is set to \ccStyle{CGAL::Tag_true}.}


\ccHeading{Queries}
\ccThree{Locate_result}{vd.locate(Point_2 p)+}{}
\ccMethod{Locate_result locate(Point_2 p);}{Performs point location for
  the query point \ccc{p}. In other words, the face, halfedge or
  vertex of the Voronoi diagram is found on which the point \ccc{p}
  lies.
  \ccPrecond{The dual Delaunay graph must contain at least one vertex.}}



\ccHeading{I/O}
\ccThree{std::ostream&}{vd.file_output(std::ostream& os)+}{}
%
\ccMethod{void file_output(std::ostream& os);}
{Writes the current state of the Voronoi diagram to the output
  stream \ccc{os}.\\
  The following operator must be defined:\\
  \ccc{std::ostream& operator<<(std::ostream&, Delaunay_graph)}
}
\ccGlue
\ccMethod{void file_input(std::istream& is);}
{Reads the current state of the Voronoi diagram from the input
  stream \ccc{is}.\\
  The following operator must be defined:\\
  \ccc{std::istream& operator>>(std::istream&, Delaunay_graph)}
}
\ccFunction{
std::ostream& operator<<(std::ostream& os, Voronoi_diagram_2<DG,VT> vd);}
{Writes the current state of the Voronoi diagram to the output
  stream \ccc{os}.\\
  The following operator must be defined:\\
  \ccc{std::ostream& operator<<(std::ostream&, Delaunay_graph)}
}
\ccGlue
\ccFunction{
std::istream& operator>>(std::istream& is, Voronoi_diagram_2<DG,VT> vd);}
{Reads the current state of the Voronoi diagram from the input
  stream \ccc{is}.\\
  The following operator must be defined:\\
  \ccc{std::istream& operator>>(std::istream&, Delaunay_graph)}
}

\ccHeading{Validity check}
\ccThree{bool}{vd.is_valid()+}{}
%
\ccMethod{bool is_valid();}{Checks the validity of the dual Delaunay
  graph and the Voronoi diagram adaptor.}

\ccHeading{Miscellaneous}
\ccThree{void}{vd.swap(other)+}{}
%
\ccMethod{void clear();}{Clears all contents of the Voronoi diagram.}
\ccGlue
\ccMethod{void swap(Voronoi_diagram_2<DG,VT> other);}{The Voronoi
  diagrams \ccc{other} and \ccVar\ are
  swapped. \ccVar.\ccc{swap(other)} should be preferred to
  \ccVar\ccc{ = other} or to 
  \ccVar\ccc{(other)} if \ccc{other} is deleted afterwards.}

\ccSeeAlso
\ccc{DelaunayGraph_2}\\
\ccc{VoronoiTraits_2}\\
\ccc{VoronoiDiagramHalfedge_2}\\
\ccc{VoronoiDiagramVertex_2}\\
\ccc{VoronoiDiagramFace_2}\\
\ccc{CGAL::Delaunay_triangulation_2<Traits,Tds>}\\
\ccc{CGAL::Regular_triangulation_2<Traits,Tds>}\\
\ccc{CGAL::Triangulation_hierarchy_2<Tr>} provided that \ccc{Tr} is a
model of \ccc{DelaunayGraph_2}\\
\ccc{CGAL::Segment_Voronoi_diagram_2<Gt,DS>}\\
\ccc{CGAL::Segment_Voronoi_diagram_hierarchy_2<Gt,STag,DS>}\\
\ccc{CGAL::Apollonius_graph_2<Gt,Agds>}\\
\ccc{CGAL::Apollonius_graph_hierarchy_2<Gt,Agds>}\\
\ccc{CGAL::Apollonius_graph_Voronoi_traits_2<AG2>}\\
\ccc{CGAL::Apollonius_graph_caching_Voronoi_traits_2<AG2>}\\
\ccc{CGAL::Apollonius_graph_identity_Voronoi_traits_2<AG2>}\\
\ccc{CGAL::Delaunay_triangulation_Voronoi_traits_2<DT2>}\\
\ccc{CGAL::Delaunay_triangulation_caching_Voronoi_traits_2<DT2>}\\
\ccc{CGAL::Delaunay_triangulation_identity_Voronoi_traits_2<DT2>}\\
\ccc{CGAL::Regular_triangulation_Voronoi_traits_2<RT2>}\\
\ccc{CGAL::Regular_triangulation_caching_Voronoi_traits_2<RT2>}\\
\ccc{CGAL::Regular_triangulation_identity_Voronoi_traits_2<RT2>}\\
\ccc{CGAL::Segment_Voronoi_diagram_Voronoi_traits_2<SVD2>}\\
\ccc{CGAL::Segment_Voronoi_diagram_caching_Voronoi_traits_2<SVD2>}\\
\ccc{CGAL::Segment_Voronoi_diagram_identity_Voronoi_traits_2<SVD2>}

\end{ccRefClass}

%% EOF
