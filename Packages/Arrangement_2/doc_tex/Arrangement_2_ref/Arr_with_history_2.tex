% +------------------------------------------------------------------------+
% | Reference manual page: Arr_with_history_2.tex
% +------------------------------------------------------------------------+
% | 
% | Package: Arrangement_2
% | 
% +------------------------------------------------------------------------+

\ccRefPageBegin

\begin{ccRefClass}{Arrangement_with_history_2<Traits,Dcel>}
\label{arr_ref:arr_with_hist}
    
\ccDefinition
%============

An object \ccc{arr} of the class \ccClassTemplateName\ represents the
planar subdivision induced by a set of input curves $\calC$.
The arrangement is represented as a doubly-connected edge-list ({\sc Dcel}).
As is the case for the \ccc{Arrangement_2<Traits,Dcel>}, each {\sc Dcel}
vertex is associated with a point and each edge is associated with an
$x$-monotone curve whose interior is disjoint from all other edges and
vertices. Each such $x$-monotone curve is a subcurve of some 
$C \in \calC$ --- or may represent an overlap among several curves
in $\calC$.

The \ccClassTemplateName\ class-template extends the \ccc{Arrangement_2}
class-template by keeping an additional container of input curves 
representing $\calC$, and by maintaining a cross-mapping between these
curves and the arrangement edges they induce. This way it is possible
to determine the inducing curve(s) of each arrangement edge. This mapping 
also allows the traversal of input curves, and the traversal of edges
induces by each curve.

The \ccClassTemplateName\ template has two parameters:
\begin{itemize}
\item The \ccc{Traits} template-parameter should be instantiated with
a model of the \ccc{ArrangementTraits_2} concept. The traits
class defines the \ccc{Curve_2} type, which represents an input curve.
It also defines the types of $x$-monotone curves and two-dimensional
points, namely \ccc{X_monotone_curve_2} and \ccc{Point_2},
respectively, and supports basic geometric predicates on them.
\item The \ccc{Dcel} template-parameter should be instantiated with
a class that is a model of the \ccc{ArranagementDcel} concept. The
value of this parameter is by default
\ccc{Arr_default_dcel<Traits>}.
\end{itemize}

\ccc{Self} is an abbreviation of the \ccRefName\ type hereafter.

\ccInclude{CGAL/Arrangement_with_history_2.h}

\ccTypes
%=======

\ccNestedType{Traits_2}{the traits class in use.}
\ccGlue
\ccNestedType{Dcel}{the {\sc Dcel} representation of the arrangement.}

\ccTypedef{typedef typename Traits_2::Point_2 Point_2;}
  {the point type, as defined by the traits class.}

\ccTypedef{typedef typename Traits_2::X_monotone_curve_2 X_monotone_curve_2;}
  {the $x$-monotone curve type, as defined by the traits class.}

\ccTypedef{typedef typename Traits_2::Curve_2 Curve_2;}
  {the curve type, as defined by the traits class.}

In addition, the nested types \ccc{Vertex}, \ccc{Halfedge} and \ccc{Face}
are defined, as well as all handle, iterator and circualtor types, as
defined by the \ccc{Arrangement_2}
class-template~\lcTex{(\ccRefPage{Arrangement_2<Traits,Dcel>})}.

\ccCreation
\ccCreationVariable{arr}
%=======================
    
\ccConstructor{Arrangement_with_history_2<Traits, Dcel>();} 
    {constructs an empty arrangement containing one unbounded face,
     which corresponds to the
     whole plane.}
    
\ccConstructor{Arrangement_with_history_2<Traits, Dcel>(const Self& other);}
    {copy constructor.}
        
\ccConstructor{Arrangement_with_history_2<Traits, Dcel>(Traits_2 *traits);}
    {constructs an empty arrangement that uses the given \ccc{traits}
     instance for performing the geometric predicates.}


\ccHeading{Assignment Methods}
%=============================

\ccMethod{Self& operator= (other);}
    {assignment operator.}

\ccMethod{void assign (const Self& other);}
    {assigns the contents of another arrangement.}

\ccMethod{void clear ();}
    {clears the arrangement.}


\ccAccessFunctions
%=================

See the \ccc{Arrangement_2} referrence pages~\lcTex{(\ccRefPage{Arrangement_2<Traits,Dcel>})} for the full list.


{\sl Accessing the Input Curves}
%----------------------------

\ccMethod{Size number_of_curves() const;}
    {returns the number of input curves that induce the arrangement.}

\ccMethod{Curve_iterator curves_begin();}
    {returns the begin-iterator of the curves inducing the arrangement.}
    
\ccMethod{Curve_iterator curves_end();}
    {returns the past-the-end iterator of the curves inducing the arrangement.}
    
\ccModifiers
%===========

See the \ccc{Arrangement_2} referrence
pages~\lcTex{(\ccRefPage{Arrangement_2<Traits,Dcel>})} for the full
list of functions for modifying arrangement vertices.

{\sl Modifying Arrangement Edges}
%--------------------------

\ccMethod{Halfedge_handle split_edge (Halfedge_handle e,
                                      const Point_2& p);}
  {splits the edge \ccc{e} into two edges (more precisely, into two halfedge
   pairs), at a given split point \ccc{p}.
   The function returns a handle for the halfedge whose source is the same
   as \ccc{e->source()} and whose target vertex is the split point.
   \ccPrecond{\ccc{p} lies in the interior of the curve associated with
   \ccc{e}.}}

\ccMethod{Halfedge_handle merge_edge (Halfedge_handle e1,
                                      Halfedge_handle e2);}
  {merges the edges represented by \ccc{e1} and \ccc{e2} into
   a single edge. 
   The function returns a handle for one of the merged halfedges.
   \ccPrecond{\ccc{e1} and \ccc{e2} share a common end-vertex, of degree
   $2$, and the $x$-monotone curves associated with \ccc{e1} and \ccc{e2}
   are mergeable into a single $x$-monotone curves.}}

\ccMethod{Face_handle remove_edge(Halfedge_handle e,
                                  bool remove_source = true,
                                  bool remove_target = true);}
  {removes the edge \ccStyle{e} from the arrangement. Since the \ccc{e} may
   be the only edge incident to its source vertex (or its target vertex),
   this vertex can be removed as well. The flags \ccc{remove_source} and
   \ccc{remove_target} indicate whether the endpoints of \ccc{e} should be
   removed, or whether they should be left as isolated vertices in the
   arrangement.
   If the operation causes two faces to merge, the merged face is returned.
   Otherwise, the face to which the edge was incident is returned.}

\ccSeeAlso
    \ccc{ArrangementDcel}\lcTex{ 
      (\ccRefPage{ArrangementDcel})}\\
    \ccc{Arr_default_dcel<Traits>}\lcTex{ 
      (\ccRefPage{CGAL::Arr_default_dcel<Traits>})}\\
    \ccc{ArrangementTraits_2}\lcTex{ 
      (\ccRefPage{ArrangementTraits_2})}\\
    \ccc{Arrangement_2<Traits,Dcel>}\lcTex{ 
      (\ccRefPage{Arrangement_2<Traits,Dcel>})}

\end{ccRefClass}

\ccRefPageEnd
