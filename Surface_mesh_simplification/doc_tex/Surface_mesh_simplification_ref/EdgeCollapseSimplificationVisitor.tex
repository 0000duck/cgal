%% Copyright (c) 2004  SciSoft.  All rights reserved.
%%
%% This file is part of CGAL (www.cgal.org); you may redistribute it under
%% the terms of the Q Public License version 1.0.
%% See the file LICENSE.QPL distributed with CGAL.
%%
%% Licensees holding a valid commercial license may use this file in
%% accordance with the commercial license agreement provided with the software.
%%
%% This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE
%% WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
%%
%% 
%%
%% Author(s)     : Fernando Cacciola <fernando_cacciola@hotmail.com>

\begin{ccRefConcept}{EdgeCollaspeSimplificationVisitor}

%% \ccHtmlCrossLink{}     %% add further rules for cross referencing links
%% \ccHtmlIndexC[concept]{} %% add further index entries

\ccDefinition

The concept \ccRefName\ describes the requirements for the {\em visitor object} which is used to track the edge collapse simplification algorithm.

The several callbacks given as member functions in the visitor are called from certain places in the algorithm implementation.

\ccTypes
  \ccNestedType{ECM}
  {The type of the surface to simplify. Must be a model of the \ccc{EdgeCollapsableMesh} concept.}{}
\ccGlue    
  \ccNestedType{FT}{A field type representing the collapse cost}{}
\ccGlue    
  \ccTypedef{typename boost::graph_traits<ECM>::edge_descriptor edge_descriptor;}
  {A {\sc Bgl} edge descriptor representing an undirected edge of the surface.}
\ccGlue    
  \ccTypedef{typename CGAL::halfedge_graph_traits<ECM>::Point Point;}
  {The point type of the vertex.}
\ccGlue    
  \ccNestedType{size_type}{An integer type representing the number of edges}{}

\ccCreation
\ccCreationVariable{v}  %% choose variable name

\ccOperations

  \ccMethod
  {void OnStarted( ECM& surface );}
  {Called before the algorithm starts.}
  
  \ccMethod
  {void OnFinished ( ECM& surface ) ; }
  {Called after the algorithm finishes.}
  
  \ccMethod
  {void OnStopConditionReached( ECM& surface ) ; } 
  {Called when the \ccc{StopPredicate} returned true
  (but not if the algorithm terminates because the surface couldn't be simplified any further).
  }
  
  \ccMethod
  {void OnCollected( edge_descriptor const& edge
                   , bool                   is_fixed
                   , ECM&                   surface
                   );
  }                  
  {Called during the {\em collecting phase} (when a cost is assigned to the edges),
  for each \ccc{edge} collected.\\
  \ccc{is_fixed} indicates whether \ccc{edge} is fixed or not.
  If it is fixed it won't be collapsed.
  }
  
  \ccMethod
  {void OnSelected(edge_descriptor const&  edge
                  ,ECM&                    surface
                  ,boost::optional<double> cost
                  ,size_type               initial_count
                  ,size_type               current_count
                  );
  }                 
  {Called during the {\em processing phase} (when edges are collapsed),
  for each \ccc{edge} that is selected.\\
  This method is called {\em before} the algorithm checks 
  if the edge is collapsable.\\
  \ccc{cost} indicates the current collapse cost for the \ccc{edge}.
  If {\em absent} (meaning that it couldn't be computed)
  the edge won't be collapsed.\\
  \ccc{initial_count} and \ccc{current_count} refers to 
  the number of edges.
  }
  
  \ccMethod
  {void OnCollapsing( edge_descriptor const& edge
                    , ECM&                   surface
                    , boost::optional<Point> placement
                    );
  }                  
  {Called when \ccc{edge} is about to be collapsed and replaced by a vertex
  whose position is \ccc{*placement}.\\
  If \ccc{placement} is absent (meaning that it couldn't be computed)
  the edge won't be collapsed.
  }
  
  \ccMethod
  {void OnNonCollapsable( edge_descriptor const& edge
                        , ECM&                   surface
                        );
  }                  
  {Called for each selected \ccc{edge} which cannot be 
  collapsed because doing so would change the topological
  type of the surface. (turn it into a non-manifold
  for instance)
  }
  
\end{ccRefConcept}

% +------------------------------------------------------------------------+
%%RefPage: end of main body, begin of footer
% EOF
% +------------------------------------------------------------------------+
