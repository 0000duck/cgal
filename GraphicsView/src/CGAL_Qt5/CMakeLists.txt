message("Configuring libCGAL_Qt5")

include(CGAL_SetupCGAL_Qt5Dependencies)

if(CGAL_Qt5_MISSING_DEPS)
  message(STATUS "libCGAL_Qt5 is missing the dependencies: ${CGAL_Qt5_MISSING_DEPS} cannot be configured.")
  return()
endif()

message( STATUS "USING Qt5_VERSION = '${Qt5Core_VERSION_STRING}'" )

include(Use_CGAL_Qt5_headers)

collect_cgal_library( CGAL_Qt5 "")

if(CGAL_HEADER_ONLY)
  set(keyword "INTERFACE")
endif()

CGAL_setup_CGAL_Qt5_dependencies( CGAL_Qt5 ${keyword})

if(NOT CGAL_HEADER_ONLY)
  target_link_libraries( CGAL_Qt5 PRIVATE CGAL_Qt5_extras)
endif()


if(COMMAND add_config_flag)
  set( CGAL_HAS_QT5 TRUE )
  add_config_flag( CGAL_HAS_QT5 )
endif()

if (CGAL_HEADER_ONLY)
  install(DIRECTORY "../../include/CGAL/Qt/" DESTINATION "${CGAL_INSTALL_INC_DIR}/CGAL/include/CGAL/Qt" COMPONENT CGAL_Qt5)
  install(DIRECTORY "../../demo/resources/" DESTINATION "${CGAL_INSTALL_INC_DIR}/CGAL/demo/resources" COMPONENT CGAL_Qt5)
  install(DIRECTORY "../../demo/icons/" DESTINATION "${CGAL_INSTALL_INC_DIR}/CGAL/demo/icons" COMPONENT CGAL_Qt5)
endif()

message("libCGAL_Qt5 is configured")
