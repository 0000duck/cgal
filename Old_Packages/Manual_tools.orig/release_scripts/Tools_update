#!/bin/sh


if [ $# -ne 1 ]; then
  echo "Usage $0 <source directory>"
  exit 1
elif [ $1 = "." ]; then
  SOURCE_DIR=`pwd`
else
  SOURCE_DIR=$1
fi

if [ ! -d $SOURCE_DIR ]; then
  echo "Directory $SOURCE_DIR does not exist"
  exit 1
fi

cd $SOURCE_DIR/doc 
echo
echo "Updating in doc directory"
echo
   ci -f -l cc_extract.tex 
   ci -f -l cc_manual.tex 
   ci -f -l cc_manual_appendix.tex 
   ci -f -l cc_manual_index.tex 
   ci -f -l cc_manual_index_appendix.tex 
   ci -f -l disclaimer.tex
   ci -f -l latex_to_html.tex
   ci -f -l manual.bib 

cd $SOURCE_DIR/format
echo 
echo "Updating in format directory"
echo
   ci -f -l cc_manual.sty
   ci -f -l cc_manual_index.sty
   ci -f -l index_test.tex
   ci -f -l latex_converter.sty
   ci -f -l test.tex

cd $SOURCE_DIR/scripts
echo
echo "Updating in scripts directory"
echo
   ci -f -l add_part_num
   ci -f -l cc_make_ref_pages
   ci -f -l cc_ref_wizard
   ci -f -l cc_ref_wizard_rc
   ci -f -l index_fix

cd $SOURCE_DIR/src
echo
echo "Updating in src directory"
echo
  ci -l -f basic.C                     
  ci -l -f basic.h                     
  ci -l -f buffer.C                    
  ci -l -f buffer.h                    
  ci -l -f cc_build_checker.C          
  ci -l -f cc_check                   
  ci -l -f cc_check_include           
  ci -l -f cc_check_include_html      
  ci -l -f cc_extract.C                
  ci -l -f cc_extract_html.C           
  ci -l -f cc_extract_images.C         
  ci -l -f cc_extract_include         
  ci -l -f cc_gif_creator             
  ci -l -f cc_index_sort.c             
  ci -l -f cc_manual_to_html          
  ci -l -f cc_patch_anchor_filter     
  ci -l -f cc_patch_anchor_pages      
  ci -l -f cc_patch_anchor_toc_index  
  ci -l -f cc_remove_unwanted_links  
  ci -l -f cc_unique.c                 
  ci -l -f config.h                    
  ci -l -f cpp_formatting.C            
  ci -l -f cpp_formatting.h            
  ci -l -f extract_lex.yy              
  ci -l -f extract_syntax.y            
  ci -l -f html_config.h               
  ci -l -f html_error.C
  ci -l -f html_error.h
  ci -l -f html_lex.h
  ci -l -f html_lex.yy
  ci -l -f html_syntax.h
  ci -l -f html_syntax.y
  ci -l -f INSTALLATION
  ci -l -f internal_macros.C
  ci -l -f internal_macros.h
  ci -l -f lex_include.h
  ci -l -f lex_include_impl.h
  ci -l -f macro_dictionary.C
  ci -l -f macro_dictionary.h
  ci -l -f Makefile
  ci -l -f Makefile_depend
  ci -l -f mstring.doc
  ci -l -f mstring.h
  ci -l -f mstring.html
  ci -l -f mstring.ps.gz
  ci -l -f mstring_old.h
  ci -l -f output.C
  ci -l -f output.h
  ci -l -f README
  ci -l -f string_conversion.C
  ci -l -f string_conversion.h

cd $SOURCE_DIR/src/latex_converter_config/html
echo
echo "Updating src/latex_converter_config/html directory"
echo
  ci -l -f alltt.sty
  ci -l -f cc_anchor_footer
  ci -l -f cc_anchor_header
  ci -l -f cc_biblio_footer
  ci -l -f cc_biblio_header
  ci -l -f cc_index_footer
  ci -l -f cc_index_header
  ci -l -f cc_manual.sty
  ci -l -f cc_manual_index.sty
  ci -l -f cc_manual_footer
  ci -l -f cc_manual_header
  ci -l -f cc_toc_footer
  ci -l -f cc_toc_header
  ci -l -f cprog.sty
  ci -l -f default.sty
  ci -l -f latex.sty
  ci -l -f latex_converter.sty
  ci -l -f path.sty

cd $SOURCE_DIR/src/latex_converter_config/ref_pages
echo
echo "Updating src/latex_converter_config/ref_pages directory"
echo
   ci -l -f Class.tex
   ci -l -f Concept.tex
   ci -l -f Constant.tex
   ci -l -f Enum.tex
   ci -l -f footer.tex
   ci -l -f Function.tex
   ci -l -f FunctionObjectClass.tex
   ci -l -f FunctionObjectConcept.tex
   ci -l -f header.tex
   ci -l -f Macro.tex
   ci -l -f Variable.tex
